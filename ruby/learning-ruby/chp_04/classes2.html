<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <title>Learning Ruby</title>
  <link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
    <table width="100%" border="0">
    <tr>
      <td align="left" width="43%">
        <a href="../chp_04/classes.html">
            <img src="../left_arrow.gif" alt="<-" border="0" />
	        Classes and methods
        </a>
      </td>
      <td align="center" width="10%"> 
		<a href="../index.html">
		<img src="../up_arrow.gif" alt="" border="0" /><br />
		<!-- Home -->
		</a>
      </td>
      <td align="right" width="47%">
        <a href="../chp_04/addressbook.html">
            Implementing AddressBook
            <img src="../right_arrow.gif" alt="->" border="0" />
        </a>
      </td>
    </tr>
    </table>
<h1>More on classes</h1>

<h2>Class <b>Person</b></h2>

<p>Now let's create a <b>Person</b> class.  We said that a person
should have a first name, last name, email and address.</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

class Person
    attr_accessor :first_name, :email
    attr_accessor :last_name, :address  
    def initialize
        @first_name = @last_name = @email = ""  
        @address = Address.new
    end
end
                       </pre>

                       </td>
                       </tr>
                       </table>

<p>The only thing new here is the "<b>@address = Address.new</b>"
line.  <b>@address</b> is not a string, but an <b>Address</b>
object, so we must create it as such.</p>

<p>Now we can create a person:</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

sandy_addr = Address.new
sandy_addr.street = "324 Campus Dr."  
sandy_addr.city   = "College Park"

sandy = Person.new
sandy.first_name = "Sandy"
sandy.last_name  = "Koh"
sandy.address = sandy_addr
                       </pre>

                       </td>
                       </tr>
                       </table>

<p>Notice that we didn't put down a state, zip or an email.  Since we 
default all values to "", we are free to creat an <b>Address</b> and
a <b>Person</b> object with incomplete information.  We can still call 
<b>sandy.email</b> without trouble.  We will just get "" in return.</p>

<p>Now let's add some more behaviour to <b>Person</b>.  Let's add
a method that returns the full name of the person.</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

class Person
    def full_name
        @first_name + " " + @last_name  
    end
end

puts sandy.full_name

                       </pre>

                       </td>
                       </tr>
                       </table>

<p>This prints "Sandy Koh".</p>

<h2>Printing a class</h2>

<p>Wouldn't it be nice if we could just type "<b>puts address</b>"?
We can make that happen.</b>

<p>The <b>puts</b> function works by calling <b>Class#to_s</b> and 
sending the result to the terminal (remember <b>Integer#to_s</b> and
friends?).  So, what we need to do is define an <b>Address#to_s</b>
method.</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

class Address
    def to_s
        "    " + @street + "\n" + \
        "    " + @city   + "\n" + \
        "    " + @state  + ", " + @zip  
    end
end
                       </pre>

                       </td>
                       </tr>
                       </table>

<p>What's that "\n"?  It indicates a "new line" character.  It is
the character that your keyboard sends when you press the "Enter"
key.  The "\" at the end of each line ensures that this is all
read as one statement.  The resulting string is returned.</p>

<p>Now we can type:</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

address.street = "23 St George St."  
address.city   = "Silver Spring"
address.state  = "MD"
address.zip    = "20465"

puts address
                       </pre>

                       </td>
                       </tr>
                       </table>

<p>Which prints:</p>
                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="shell">

    23 St George St.  
    Silver Spring
    MD, 20465
                       </pre>

                       </td>
                       </tr>
                       </table>

<h2>Exercises</h2>

<ol>
<li><p>Write a <b>Person#to_s</b> method that prints the person's 
    full name, email, address and phone.  Use the <b>Address#to_s</b>
    method we just wrote.</p></li>
</ol>


    <table width="100%" border="0">
    <tr>
      <td align="left" width="43%">
        <a href="../chp_04/classes.html">
            <img src="../left_arrow.gif" alt="<-" border="0" />
	        Classes and methods
        </a>
      </td>
      <td align="center" width="10%"> 
		<a href="../index.html">
		<img src="../up_arrow.gif" alt="" border="0" /><br />
		<!-- Home -->
		</a>
      </td>
      <td align="right" width="47%">
        <a href="../chp_04/addressbook.html">
            Implementing AddressBook
            <img src="../right_arrow.gif" alt="->" border="0" />
        </a>
      </td>
    </tr>
    </table>
</body>
</html>
