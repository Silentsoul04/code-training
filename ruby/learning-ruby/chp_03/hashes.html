<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <title>Learning Ruby</title>
  <link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
    <table width="100%" border="0">
    <tr>
      <td align="left" width="43%">
        <a href="../chp_03/iterators.html">
            <img src="../left_arrow.gif" alt="<-" border="0" />
	        Iterators
        </a>
      </td>
      <td align="center" width="10%"> 
		<a href="../index.html">
		<img src="../up_arrow.gif" alt="" border="0" /><br />
		<!-- Home -->
		</a>
      </td>
      <td align="right" width="47%">
        <a href="../chp_03/address.html">
            Example: Addressbook
            <img src="../right_arrow.gif" alt="->" border="0" />
        </a>
      </td>
    </tr>
    </table>
<h1>Hashes</h1>

<p>The next class that we are going to look at is the <b>Hash</b>.</p>

<p>Hashes are a generalization of arrays.  Instead of only permitting integer 
indices, as in <b>array[3]</b>, hashes allow any object to be used as an 
"index".  So, you can write <b>hash["name"]</b></p>

<p>Suppose that I want to store some information about a friend.  I
could use an array, like this:</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

friend = [ "Jeffrey", "Biggs", "34 Airport Rd",  
      "Toronto", "Ontario" 
]
                       </pre>

                       </td>
                       </tr>
                       </table>

<p>This could work, but I would have to remember that <b>friend[0]</b> is
the first name, <b>friend[1]</b> is the last name and so on.  It could get
quite complicated.</p>

<p>This is exactly the kind of problem that a hash can help you with.  This
is how you define a hash:</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

friend = {
	"first name" => "Jeffrey",
	"last name"  => "Biggs",
	"address"    => "34 Airport Rd",  
	"city"       => "Toronto",
	"province"   => "Ontario"
}
                       </pre>

                       </td>
                       </tr>
                       </table>

<p>Just like arrays, you can later add another field like this:</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

friend["country"] = "Canada"  
                       </pre>

                       </td>
                       </tr>
                       </table>

<p>
<table cellspacing="0">
<tr class="warning">
<td>
<strong>Warning:</strong>
Notice that you create hashes using {squigly brackets} instead of the
[square brackets] used for arrays.
</td>
</tr>
</table>
</p>


<h3>Some terminology: keys and values</h3>

<p>Since hashes don't use numeric indices, we use the word <strong>keys
</strong> instead.  The objects that the keys refer to are called
<strong>values</strong>.</p>

<p>So, in the above example, the keys are <b>"first name"</b>, 
<b>"last name"</b> and <b>"city"</b> are some of the keys.  Their respective
values are <b>"Jeffrey"</b>, <b>"Biggs"</b> and <b>"Toronto"</b>.</p>

<h2>Iterating through hashes</h2>

<p>Hashes also have iterators.  They actually have a few.</p>

<h3><b>Hash#each</b></h3>

<p>Hashes have a <b>Hash#each</b> method, similar to <b>Array#each</b>.
This method, however, supplies both they key and the value.</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

friend.each do |key, value| 
	puts key + " => " + value 
end
                       </pre>

                       </td>
                       </tr>
                       </table>

<p>This produces:</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="shell">

city => Toronto
last name => Biggs
country => Canada
province => Ontario
address => 34 Airport Rd  
first name => Jeffrey
                       </pre>

                       </td>
                       </tr>
                       </table>

<p>This points to one drawback of hashes.  The data in a hash is not organized 
in any particular order.  Is there any reason why Ruby should know that 
<b>"first name"</b> comes before <b>"city"</b>?  Not at all.</p>

<p>The best way to deal with this sort of problem is by creating your 
own class which takes care of the problem.  Ruby is an excellent language
for creating your own classes.  But before we do that, there is some 
material that we should cover.  Creating classes and methods is the topic 
of the next chapter.</p>

<p><b>Hash#each_pair</b> is a synonym for <b>Hash#each</b>.</p>

<h3><b>Hash#each_key</b></h3>

<p>The name says it all.  This method iterates through all the keys just like
<b>Arrah#each</b>.</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

>> friend.each_key do |key|  
?>     puts key
>> end
city
last name
country
province
address
first name
                       </pre>

                       </td>
                       </tr>
                       </table>


<h3><b>Hash#each_value</b></h3>

<p>Iterates through all the values.</p>

                   <!-- Pick a small width so the table has to
                        expand and just fits the required size. -->
                   <table class="code" width="10%">
                   <tr>
                   <td>
                   <pre class="code">

>> friend.each_value do |val|  
?>     puts val
>> end
Toronto
Biggs
Canada
Ontario
34 Airport Rd
Jeffrey
                       </pre>

                       </td>
                       </tr>
                       </table>

    <table width="100%" border="0">
    <tr>
      <td align="left" width="43%">
        <a href="../chp_03/iterators.html">
            <img src="../left_arrow.gif" alt="<-" border="0" />
	        Iterators
        </a>
      </td>
      <td align="center" width="10%"> 
		<a href="../index.html">
		<img src="../up_arrow.gif" alt="" border="0" /><br />
		<!-- Home -->
		</a>
      </td>
      <td align="right" width="47%">
        <a href="../chp_03/address.html">
            Example: Addressbook
            <img src="../right_arrow.gif" alt="->" border="0" />
        </a>
      </td>
    </tr>
    </table>
</body>
</html>
